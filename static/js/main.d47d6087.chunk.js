(this.webpackJsonpmemory_react_the_3=this.webpackJsonpmemory_react_the_3||[]).push([[0],{13:function(e,t,n){},14:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),o=n(6),a=n.n(o),i=(n(13),n(2)),u=n(8),s=n(7),l=(n(14),n(0)),h=function(e){var t=e.x,n=e.y,r=e.callback,c=e.state,o=e.image;return Object(l.jsx)("button",{onClick:function(){return r(t,n)},style:{width:"100px",height:"100px",background:"hidden"!==c?"url(".concat(o,")"):"none",objectFit:"fill"}})},f=function(e,t){var n=Array.from(e);return n[t].state="hidden"===n[t].state?"revealed":"hidden",n},d=function(){var e=Object(r.useState)(function(){var e=function(){var e=[];return["pomme-rouge","banane","orange","citron-vert","grenade","abricot","citron","fraise","pomme-verte","p\xeache","raisin","past\xe8que","prune","poire","cerise-rouge","framboise","mangue","cerise-jaune"].forEach((function(t,n){e.push({state:"hidden",value:t,image:n<10?"/memory_react_fruits/parts-0"+n+".png":"/memory_react_fruits/parts-"+n+".png"})})),e}();return function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),r=e[t];e[t]=e[n],e[n]=r}return e}(e.concat(Object(s.a)(e.map((function(e){return Object(u.a)({},e)})))))}()),t=Object(i.a)(e,2),n=t[0],c=t[1],o=Object(r.useState)([]),a=Object(i.a)(o,2),d=a[0],j=a[1],b=function(e,t){return 6*e+t},m=Object(r.useState)(!1),v=Object(i.a)(m,2),g=v[0],O=v[1],p=Object(r.useState)(60),x=Object(i.a)(p,2),y=x[0],S=x[1];Object(r.useEffect)((function(){g&&(y>0?setTimeout((function(){return S(y-1)}),1e3):(alert("YOU LOSE!"),O(!1),S(60)))}),[g,y]);var _,w,C=function(e,t){O(!0),j((function(){var n=Array.from(d);return n.push([e,t]),console.log("updatedLasPosCards :",n),n}));var r=b(e,t),o=n[r];if("removed"!==o.state&&!(n.filter((function(e){return"revealed"===e.state})).length>=2&&"hidden"===o.state)){c(f(n,r));var a=n.filter((function(e){return"revealed"===e.state}));2===a.length&&(a[0].value===a[1].value?(a.forEach((function(e){e.state="removed"})),j([])):setTimeout((function(){c(f(n,r)),c(f(n,b(d[0][0],d[0][1]))),j([])}),1e3)),n.filter((function(e){return"removed"===e.state})).length===n.length&&(!function(e){var t=new Headers;t.append("Content-Type","application/json");var n=JSON.stringify({value:e});fetch("http://localhost:3000/api/scores/",{method:"POST",headers:t,body:n,redirect:"follow",mode:"cors"}).then((function(e){return e.text()})).then((function(e){return console.log(e)})).catch((function(e){return console.log("error",e)}))}(y),alert("YOU WIN! Score: "+y))}};return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("div",{children:(_=n,w=6,Array.from({length:Math.ceil(_.length/w)},(function(e,t){return _.slice(t*w,t*w+w)}))).map((function(e,t){return Object(l.jsx)("div",{children:e.map((function(e,n){return Object(l.jsx)(h,{x:t,y:n,value:e.value,callback:C,state:e.state,image:e.image},b(t,n))}))},t)}))}),Object(l.jsxs)("div",{children:["Countdown: ",y]}),Object(l.jsx)("div",{style:{width:.6*(60-y)+"rem",height:"3rem",backgroundColor:"red"}})]})},j=function(){var e,t=Object(r.useState)([]),n=Object(i.a)(t,2),c=n[0],o=n[1];return e=function(e){c.length||o(e.scores.sort((function(e,t){return Math.sign(t.value-e.value)})).slice(0,5))},fetch("http://localhost:3000/api/scores/",{method:"GET",redirect:"follow",mode:"cors"}).then((function(e){return e.text()})).then((function(t){return e(JSON.parse(t))})).catch((function(e){return console.log("error",e)})),Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("div",{children:[Object(l.jsx)("h1",{children:"Memory"}),Object(l.jsx)("h2",{children:"Last Scores"}),Object(l.jsx)("ul",{children:c.map((function(e){return Object(l.jsx)("li",{children:e.value},e._id)}))})]}),Object(l.jsx)(d,{})]})},b=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,17)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,o=t.getLCP,a=t.getTTFB;n(e),r(e),c(e),o(e),a(e)}))};a.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(j,{})}),document.getElementById("root")),b()}},[[16,1,2]]]);
//# sourceMappingURL=main.d47d6087.chunk.js.map