(this.webpackJsonpmemory_react_the_3=this.webpackJsonpmemory_react_the_3||[]).push([[0],{13:function(e,t,n){},14:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),o=n(6),i=n.n(o),a=(n(13),n(14),n(2)),u=n(8),s=n(7),l=n(0),f=function(e){var t=e.x,n=e.y,r=e.callback,c=e.state,o=e.image;return Object(l.jsx)("button",{onClick:function(){return r(t,n)},style:{width:"100px",height:"100px",background:"hidden"!==c?"url(".concat(o,")"):"none",objectFit:"fill"}})},h=function(e,t){var n=Array.from(e);return n[t].state="hidden"===n[t].state?"revealed":"hidden",n},d=function(){var e=Object(r.useState)(function(){var e=function(){var e=[];return["pomme-rouge","banane","orange","citron-vert","grenade","abricot"].forEach((function(t,n){e.push({state:"hidden",value:t,image:n<10?"/memory_react_fruits/parts-0"+n+".png":"/memory_react_fruits/parts-"+n+".png"})})),e}();return function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),r=e[t];e[t]=e[n],e[n]=r}return e}(e.concat(Object(s.a)(e.map((function(e){return Object(u.a)({},e)})))))}()),t=Object(a.a)(e,2),n=t[0],c=t[1],o=Object(r.useState)([]),i=Object(a.a)(o,2),d=i[0],j=i[1],b=Object(r.useState)(!1),O=Object(a.a)(b,2),m=O[0],v=O[1],g=Object(r.useState)(60),p=Object(a.a)(g,2),x=p[0],y=p[1];Object(r.useEffect)((function(){m&&(x>0?setTimeout((function(){return y(x-1)}),1e3):(alert("YOU LOSE!"),v(!1),y(60)))}),[m,x]);var S,_,E=function(e,t){return 6*e+t},w=function(e,t){v(!0),j((function(){var n=Array.from(d);return n.push([e,t]),console.log("updatedLastClicks :",n),n}));var r=E(e,t),o=n[r];if("removed"!==o.state&&!(n.filter((function(e){return"revealed"===e.state})).length>=2&&"hidden"===o.state)){c(h(n,r));var i=n.filter((function(e){return"revealed"===e.state}));2===i.length&&(i[0].value===i[1].value?(i.forEach((function(e){e.state="removed"})),j([])):setTimeout((function(){c(h(n,r)),c(h(n,E(d[0][0],d[0][1]))),j([])}),1e3)),n.filter((function(e){return"removed"===e.state})).length===n.length&&(!function(e){var t=new Headers;t.append("Content-Type","application/json");var n=JSON.stringify({value:e});fetch("http://localhost:3000/api/scores/",{method:"POST",headers:t,body:n,redirect:"follow",mode:"cors"}).then((function(e){return e.text()})).then((function(e){return console.log(e)})).catch((function(e){return console.log("error",e)}))}(x),alert("YOU WIN! Score: "+x))}};return Object(l.jsxs)(l.Fragment,{children:[x<60&&x>0?Object(l.jsx)("div",{children:"C\u2018est parti !"}):Object(l.jsx)("br",{}),Object(l.jsx)("div",{children:(S=n,_=6,Array.from({length:Math.ceil(S.length/_)},(function(e,t){return S.slice(t*_,t*_+_)}))).map((function(e,t){return Object(l.jsx)("div",{children:e.map((function(e,n){return Object(l.jsx)(f,{x:t,y:n,value:e.value,callback:w,state:e.state,image:e.image},E(t,n))}))},t)}))}),Object(l.jsxs)("div",{children:["Countdown: ",x]}),Object(l.jsx)("div",{style:{width:.6*(60-x)+"rem",height:"3rem",backgroundColor:"red"}})]})},j=function(){var e=Object(r.useState)([]),t=Object(a.a)(e,2),n=t[0],c=t[1],o=Object(r.useState)(null),i=Object(a.a)(o,2),u=i[0],s=i[1];return Object(r.useEffect)((function(){var e;e=function(e){s(e.scores)},fetch("http://localhost:3000/api/scores/",{method:"GET",redirect:"follow",mode:"cors"}).then((function(e){return e.text()})).then((function(t){return e(JSON.parse(t))})).catch((function(e){return console.log("error",e)}))}),[]),Object(r.useEffect)((function(){null!==u&&c(u.sort((function(e,t){return Math.sign(t.value-e.value)})).slice(0,5))}),[u]),Object(l.jsx)("ul",{children:n.length?n.map((function(e){return Object(l.jsxs)("li",{style:{display:"flex",flexDirection:"row"},children:[Object(l.jsx)("div",{style:{marginRight:"1rem"},children:e.value}),Object(l.jsx)("button",{onClick:function(){var t;t=e._id,fetch("http://localhost:3000/api/scores/"+t,{method:"DELETE",redirect:"follow",mode:"cors"}).then((function(e){return e.text()})).then((function(e){return console.log(e)})).catch((function(e){return console.log("error",e)})),s(u.filter((function(t){return t._id!==e._id})))},children:"Delete"})]},e._id)})):Object(l.jsx)("div",{children:"...There\u2018s no High scores yet"})})},b=function(){return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("div",{children:[Object(l.jsx)("h1",{children:"Memory"}),Object(l.jsx)("h2",{children:"Last Scores"}),Object(l.jsx)(j,{})]}),Object(l.jsx)(d,{})]})},O=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,17)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),r(e),c(e),o(e),i(e)}))};i.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(b,{})}),document.getElementById("root")),O()}},[[16,1,2]]]);
//# sourceMappingURL=main.d48c9ccc.chunk.js.map