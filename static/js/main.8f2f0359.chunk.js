(this.webpackJsonpmemory_react_the_3=this.webpackJsonpmemory_react_the_3||[]).push([[0],{13:function(e,t,n){},14:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),o=n(6),i=n.n(o),s=(n(13),n(14),n(2)),a=n(8),u=n(7),l=n(0),h=function(e){var t=e.x,n=e.y,r=e.callback,c=e.state,o=e.image;return Object(l.jsx)("button",{onClick:function(){return r(t,n)},style:{width:"100px",height:"100px",background:"hidden"!==c?"url(".concat(o,")"):"none",objectFit:"fill"}})},f=function(e,t){var n=Array.from(e);return n[t].state="hidden"===n[t].state?"revealed":"hidden",n},d=function(){var e=Object(r.useState)(function(){var e=function(){var e=[];return["pomme-rouge","banane","orange","citron-vert","grenade","abricot","citron","fraise","pomme-verte"].forEach((function(t,n){e.push({state:"hidden",value:t,image:n<10?"/memory_react_fruits/parts-0"+n+".png":"/memory_react_fruits/parts-"+n+".png"})})),e}();return function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),r=e[t];e[t]=e[n],e[n]=r}return e}(e.concat(Object(u.a)(e.map((function(e){return Object(a.a)({},e)})))))}()),t=Object(s.a)(e,2),n=t[0],c=t[1],o=Object(r.useState)([]),i=Object(s.a)(o,2),d=i[0],j=i[1],b=Object(r.useState)(!1),m=Object(s.a)(b,2),v=m[0],O=m[1],g=Object(r.useState)(60),x=Object(s.a)(g,2),p=x[0],y=x[1];Object(r.useEffect)((function(){v&&(p>0?setTimeout((function(){return y(p-1)}),1e3):(alert("YOU LOSE!"),O(!1),y(60)))}),[v,p]);var _,S,C=function(e,t){return 6*e+t},E=function(e,t){O(!0),j((function(){var n=Array.from(d);return n.push([e,t]),console.log("updatedLastClicks :",n),n}));var r=C(e,t),o=n[r];if("removed"!==o.state&&!(n.filter((function(e){return"revealed"===e.state})).length>=2&&"hidden"===o.state)){c(f(n,r));var i=n.filter((function(e){return"revealed"===e.state}));2===i.length&&(i[0].value===i[1].value?(i.forEach((function(e){e.state="removed"})),j([])):setTimeout((function(){c(f(n,r)),c(f(n,C(d[0][0],d[0][1]))),j([])}),1e3)),n.filter((function(e){return"removed"===e.state})).length===n.length&&(!function(e){var t=new Headers;t.append("Content-Type","application/json");var n=JSON.stringify({value:e});fetch("http://localhost:3000/api/scores/",{method:"POST",headers:t,body:n,redirect:"follow",mode:"cors"}).then((function(e){return e.text()})).then((function(e){return console.log(e)})).catch((function(e){return console.log("error",e)}))}(p),alert("YOU WIN! Score: "+p))}};return Object(l.jsxs)(l.Fragment,{children:[p<60&&p>0?Object(l.jsx)("div",{children:"C\u2018est parti !"}):Object(l.jsx)("br",{}),Object(l.jsx)("div",{children:(_=n,S=6,Array.from({length:Math.ceil(_.length/S)},(function(e,t){return _.slice(t*S,t*S+S)}))).map((function(e,t){return Object(l.jsx)("div",{children:e.map((function(e,n){return Object(l.jsx)(h,{x:t,y:n,value:e.value,callback:E,state:e.state,image:e.image},C(t,n))}))},t)}))}),Object(l.jsxs)("div",{children:["Countdown: ",p]}),Object(l.jsx)("div",{style:{width:.6*(60-p)+"rem",height:"3rem",backgroundColor:"red"}})]})},j=function(){var e=Object(r.useState)([]),t=Object(s.a)(e,2),n=t[0],c=t[1],o=Object(r.useState)(null),i=Object(s.a)(o,2),a=i[0],u=i[1];return Object(r.useEffect)((function(){var e;e=function(e){u(e.scores)},fetch("http://localhost:3000/api/scores/",{method:"GET",redirect:"follow",mode:"cors"}).then((function(e){return e.text()})).then((function(t){return e(JSON.parse(t))})).catch((function(e){return console.log("error",e)}))}),[]),Object(r.useEffect)((function(){null!==a&&c(a.sort((function(e,t){return Math.sign(t.value-e.value)})).slice(0,5))}),[a]),Object(l.jsx)("ul",{children:n.length?n.map((function(e){return Object(l.jsxs)("li",{style:{display:"flex",flexDirection:"row"},children:[Object(l.jsx)("div",{style:{marginRight:"1rem"},children:e.value}),Object(l.jsx)("button",{onClick:function(){var t;t=e._id,fetch("http://localhost:3000/api/scores/"+t,{method:"DELETE",redirect:"follow",mode:"cors"}).then((function(e){return e.text()})).then((function(e){return console.log(e)})).catch((function(e){return console.log("error",e)})),u(a.filter((function(t){return t._id!==e._id})))},children:"Delete"})]},e._id)})):Object(l.jsx)("div",{children:"...There\u2018s no High scores yet"})})},b=function(){return Object(l.jsx)(l.Fragment,{children:Object(l.jsxs)("div",{style:{display:"flex",flexDirection:"column",fontSize:"small"},children:[Object(l.jsx)("div",{children:"Sources :"}),Object(l.jsxs)("div",{children:["Client : ",Object(l.jsx)("a",{href:"https://github.com/NicolasHov/memory_react_fruits",children:"https://github.com/NicolasHov/memory_react_fruits"})]}),Object(l.jsxs)("div",{children:["API Highscores : ",Object(l.jsx)("a",{href:"https://github.com/NicolasHov/memory_fruits_server",children:"https://github.com/NicolasHov/memory_fruits_server"})]})]})})},m=function(){return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("div",{style:{minHeight:"calc(100vh - 90px)"},children:[Object(l.jsxs)("div",{children:[Object(l.jsx)("h1",{children:"Memory"}),Object(l.jsx)("h2",{children:"High Scores"}),Object(l.jsx)(j,{})]}),Object(l.jsx)(d,{})]}),Object(l.jsx)(b,{})]})},v=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,17)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),r(e),c(e),o(e),i(e)}))};i.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(m,{})}),document.getElementById("root")),v()}},[[16,1,2]]]);
//# sourceMappingURL=main.8f2f0359.chunk.js.map